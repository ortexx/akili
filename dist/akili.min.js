/*!
 * Akili is a javascript framework
 * 
 * const Akili = makeItEasy(js + html);
 * 
 * @version 0.6.6
 * @author Alexandr Balasyan <mywebstreet@gmail.com>
 * {@link http://akilijs.com}
 * {@link https://github.com/ortexx/akili}
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),a=r(i),s=n(12),u=r(s),l=n(6),c=r(l),f=n(13),h=r(f),p=n(14),_=r(p),d=n(15),y=r(d),v=n(5),b=r(v),m=n(16),g=r(m),w=n(17),k=r(w),O=n(18),P=r(O),j=n(19),E=r(j),S=n(20),A=r(S),C=n(21),T=r(C),x=n(22),L=r(x),M=n(23),R=r(M),B=n(24),K=r(B),N=n(25),H=r(N),I=n(26),U=r(I),V=n(10),F=r(V),D=n(2),q=r(D),z=n(27),Q=r(z),$=n(7),G=r($),W=n(8),Y=r(W),J=n(4),X=r(J),Z=n(11),ee=r(Z),te=n(9),ne=r(te),re=n(1),oe=r(re),ie={};ie.setDefaults=function(){var e=this;this.options={debug:!0,globals:{utils:oe.default}},this.__init=null,this.__cleared=!1,this.__components={},this.__aliases={},this.__scopes={},this.__storeLinks={},this.__window={},this.__isolation=null,this.__evaluation=null,this.__wrapping=!1,this.__onError=function(){return e.triggerInit(!1)},this.htmlBooleanAttributes=["disabled","contenteditable","hidden"],this.components={},this.services={},this.Component=a.default,this.EventEmitter=Y.default,this.Scope=G.default,this.utils=oe.default,this.components.A=Q.default,this.components.Audio=L.default,this.components.Content=k.default,this.components.For=c.default,this.components.Embed=T.default,this.components.If=u.default,this.components.Include=P.default,this.components.Input=_.default,this.components.Iframe=E.default,this.components.Image=A.default,this.components.Object=U.default,this.components.Radio=y.default,this.components.Route=F.default,this.components.Select=h.default,this.components.Source=H.default,this.components.Text=b.default,this.components.Textarea=g.default,this.components.Track=K.default,this.components.Url=q.default,this.components.Video=R.default,this.services.request=X.default,this.services.router=ee.default,this.services.store=ne.default,this.define(),this.errorHandling(),this.isolateEvents(),this.isolateArrayPrototype(),this.isolateWindowFunctions()},ie.define=function(){Q.default.define(),L.default.define(),k.default.define(),a.default.define(),T.default.define(),c.default.define(),P.default.define(),E.default.define(),A.default.define(),_.default.define(),u.default.define(),U.default.define(),y.default.define(),F.default.define(),h.default.define(),H.default.define(),g.default.define(),K.default.define(),R.default.define()},ie.clearGlobals=function(){if(!this.__cleared){for(var e in this.__window.Element.prototype)Element.prototype[e]=this.__window.Element.prototype[e];for(var t in this.__window.Array.prototype)Array.prototype[t]=this.__window.Array.prototype[t];for(var n in this.options.globals)this.options.globals[n]=this.unwrap(this.options.globals[n]);window.setTimeout=this.__window.setTimeout,window.setInterval=this.__window.setInterval,window.Promise=this.__window.Promise,window.removeEventListener("error",this.__onError),this.__cleared=!0}},ie.joinBindingKeys=function(e){return e.map(function(e){return e.toString()}).join(".")},ie.addScope=function(e){if(this.__scopes[e.__name])throw new Error("Scope name "+e.__name+" already exists");this.__scopes[e.__name]=e},ie.getScope=function(e){return this.__scopes[e]},ie.removeScope=function(e){this.__scopes[e]=null,delete this.__scopes[e]},ie.getAkiliParents=function(e){function t(e){e.parentNode&&(e.parentNode.__akili&&(r.push(e.parentNode),!n)||t(e.parentNode))}var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];return t(e),n?r:r[0]},ie.setTemplate=function(e,t){return t=t.replace(/\${(((?!\${)\s*this\.__content\s*)*)}/,e.innerHTML),e.innerHTML=t,e.innerHTML},ie.createScopeName=function(){var e=this;return oe.default.createRandomString(16,function(t){return!!e.__scopes[t]})},ie.isolate=function(e){if(this.__isolation)return e();this.__isolation={};var t=e(),n=[];for(var r in this.__isolation)this.__isolation.hasOwnProperty(r)&&n.push(this.__isolation[r]);this.__isolation=null;for(var o=0,i=n.length;o<i;o++){var a=n[o];a.isDeleted?a.component.__evaluateByKeys(a.keys,void 0,!0):a.component.scope.__set(a.keys,oe.default.getPropertyByKeys(a.keys,a.component.__scope))}return n=null,t},ie.unevaluate=function(e){var t=this.__evaluation,n=void 0;return this.__evaluation=null,n=e(),this.__evaluation=t,n},ie.wrapping=function(e){if(this.__wrapping)return e();this.__wrapping=!0;var t=e();return this.__wrapping=!1,t},ie.unisolate=function(e){var t=this.__isolation,n=void 0;return this.__isolation=null,n=e(),this.__isolation=t,n},ie.nextTick=function(e){return new Promise(function(t){return setTimeout(function(){return Promise.resolve(e()).then(t)})})},ie.initialize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.recompile,r=e.__akili;if(r){if(n)return r.__recompile(!0===n?{}:n),r}else{var o=e===this.__root,i=oe.default.toDashCase(e.getAttribute("component")||e.tagName.toLowerCase()),a=this.__components[i];e:if(!a){var s=Object.keys(this.__aliases);if(!s.length)break e;var u=s.join(",");if(!e.matches(u))break e;for(var l=0,c=s.length;l<c;l++){var f=s[l];if(e.matches(f)){a=this.__components[this.__aliases[f]];break}}}if((a||o)&&(a||(a=this.Component),(!a.matches||e.matches(a.matches))&&(r=new a(e,{}),!r.__cancelled&&!ie.getAkiliParents(e).find(function(e){return e.__akili.__prevent}))))return r.__create(),r}},ie.compile=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recompile:!1},r=[];!function e(o){var i=t.initialize(o,n),a=o.children;i&&r.push(i);for(var s=0,u=a.length;s<u;s++){e(a[s])}}(e);for(var o=[],i=0,a=r.length;i<a;i++){var s=r[i];o.push(s.__compile())}return Promise.all(o).then(function(){for(var e=[],t=r.length-1;t>=0;t--){var n=r[t];e.push(n.__resolve())}return Promise.all(e)})},ie.component=function(e,t){if(e=e.toLowerCase(),!t)return this.__components[e]||null;this.__components[e]&&ie.options.debug&&console.warn("Component "+e+" already was added"),this.__components[e]=t},ie.unregisterComponent=function(e){delete this.__components[e]},ie.alias=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(t=t.toLowerCase()))return this.__aliases[e]||null;this.__aliases[e]&&ie.options.debug&&console.warn("Alias with selector "+e+" already was added"),this.__aliases[e]=t},ie.unregisterAlias=function(e){delete this.__aliases[e]},ie.isolateArrayPrototype=function(){var e=this;this.__window.Array={prototype:{}};for(var t=Object.getOwnPropertyNames(Array.prototype),n=0,r=t.length;n<r;n++){(function(n,r){var o=t[n],i=Array.prototype[o];if("function"!=typeof i||"constructor"==o)return"continue";e.__window.Array.prototype[o]=i,Array.prototype[o]=function(){var e=this,t=arguments;return ie.unevaluate(function(){return e.__isProxy?ie.isolate(function(){return i.apply(e,t)},e):i.apply(e,t)})}})(n)}},ie.isolateWindowFunctions=function(){this.__window.setTimeout=setTimeout,this.__window.setInterval=setInterval,this.__window.Promise=Promise,window.setTimeout=this.createCallbackIsolation(window.setTimeout,0),window.setInterval=this.createCallbackIsolation(window.setInterval,0),window.Promise.constructor=this.createCallbackIsolation(window.Promise.constructor),window.Promise.prototype.then=this.createCallbackIsolation(window.Promise.prototype.then,[0,"last"]),window.Promise.prototype.catch=this.createCallbackIsolation(window.Promise.prototype.catch)},ie.isolateEvents=function(){this.__window.Element={prototype:{}},this.__window.Element.prototype.addEventListener=Element.prototype.addEventListener,this.__window.Element.prototype.removeEventListener=Element.prototype.removeEventListener,this.__window.Element.prototype.remove=Element.prototype.remove,Element.prototype.remove=function(){return delete this.__akiliListeners,ie.__window.Element.prototype.remove.apply(this,arguments)},Element.prototype.addEventListener=function(e,t){var n=[].slice.call(arguments);return this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[e]||(this.__akiliListeners[e]=[]),n[1]=function(){var e=this,n=arguments;return ie.isolate(function(){return t.apply(e,n)})},this.__akiliListeners[e].push({link:t,fn:n[1]}),ie.__window.Element.prototype.addEventListener.apply(this,n)},Element.prototype.removeEventListener=function(e,t){var n=[].slice.call(arguments);this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[e]||(this.__akiliListeners[e]=[]);for(var r=0,o=this.__akiliListeners[e].length;r<o;r++){var i=this.__akiliListeners[e][r];if(i.link===t){this.__akiliListeners[e].splice(r,1),n[1]=i.fn,r--,o--;break}}return this.__akiliListeners[e].length||delete this.__akiliListeners[e],ie.__window.Element.prototype.removeEventListener.apply(this,n)}},ie.createCallbackIsolation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"last";return function(){var n=[].slice.call(arguments);!Array.isArray(t)&&(t=[t]);for(var r=0,o=t.length;r<o;r++){(function(e,r){var o=t[e],i=o,a=n[o];if("last"==o&&(i=n.length-1,a=n[i]),"function"!=typeof a)return"continue";n[i]=function(){var e=arguments;return ie.isolate(function(){return a.apply(a,e)})}})(r)}return e.apply(this,n)}},ie.wrap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=e;if("function"==typeof e)n.push(e.prototype),n.push(e),r=t.reverse?e.__akili||e:this.wrapFunction(e,t);else{if(!e||"object"!=(void 0===e?"undefined":o(e))||Array.isArray(e))return e;n.push(e)}for(var i=0,a=n.length;i<a;i++)for(var s=n[i],u=Object.getOwnPropertyNames(s),l=0,c=u.length;l<c;l++){var f=u[l],h=s[f];if("object"==(void 0===h?"undefined":o(h)))this.wrap(h,t);else if("function"!=typeof h)continue;t.reverse?s[f]=s[f].__akili||s[f]:s[f]=this.wrapFunction(s[f])}return r},ie.unwrap=function(e){return this.wrap(e,{reverse:!0})},ie.wrapFunction=function(e){if(e.__akili)return e;var t=function(){var t=this,n=arguments;return ie.wrapping(function(){return e.apply(t,n)})};return Object.defineProperty(t,"__akili",{enumerable:!1,value:e}),t},ie.errorHandling=function(){window.addEventListener("error",this.__onError)},ie.triggerInit=function(e){ie.__init=e,window.dispatchEvent(new CustomEvent("akili-init",{detail:e}))},ie.init=function(e){var t=this;if(!((e=e||document.body)instanceof Element))throw new Error("Root element must be an html element");if(e===document.documentElement)throw new Error('"html" can\'t be the root element');this.__root=e,window.AKILI_SERVER?(ie.initServerSideHtml(window.AKILI_SERVER.html),ie.initServerSideRequestCache(window.AKILI_SERVER.requestCache)):window.AKILI_CLIENT={html:this.prepareServerSideHtml()};for(var n in this.options.globals)this.options.globals[n]=this.wrap(this.options.globals[n]);return this.compile(this.__root).then(function(){if(ee.default.__init)return ee.default.changeState()}).then(function(){window.AKILI_CLIENT&&(window.AKILI_CLIENT.requestCache=t.prepareServerSideRequestCache()),t.triggerInit(!0)}).catch(function(e){throw t.triggerInit(!1),e})},ie.initServerSideHtml=function(e){for(var t=this.__root.attributes.length-1;t>=0;t--)this.__root.removeAttribute(this.__root.attributes[t].name);var n=new DOMParser,r=n.parseFromString(e,"text/html"),o=r.querySelector(this.__root===document.body?"body":"body > *");this.__root.innerHTML=o.innerHTML;for(var i=o.attributes.length-1;i>=0;i--){var a=o.attributes[i];this.__root.setAttribute(a.name,a.value)}},ie.initServerSideRequestCache=function(e){for(var t in e){var n="__main"===t?X.default:X.default.__instances[t];!function(e,t){for(var n in t)e.__cache[n]=t[n]}(n,e[t])}},ie.prepareServerSideHtml=function(){return this.__root.outerHTML},ie.prepareServerSideRequestCache=function(){var e={__main:X.default.__cache};for(var t in X.default.__instances)e[t]=X.default.__instances[t].__cache;return e},ie.deinit=function(){this.clearGlobals(),ee.default.deinit(),X.default.deinit();for(var e=Object.keys(ne.default.__target),t=0,n=e.length;t<n;t++)delete ne.default.__target[e[t]];this.setDefaults()},window.Akili=ie,t.default=ie,ie.setDefaults()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(8),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s={};s.class=function(e){if(!e||"object"!==(void 0===e?"undefined":o(e)))return"";for(var t=[],n=Object.keys(e),r=0,i=n.length;r<i;r++){var a=n[r];e[a]&&t.push(a)}return t.join(" ")},s.style=function(e){if(!e||"object"!==(void 0===e?"undefined":o(e)))return"";for(var t=[],n=Object.keys(e),r=0,i=n.length;r<i;r++){var a=n[r],s=e[a];s&&t.push(this.toDashCase(a)+":"+s)}return t.join(";")},s.split=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],o="";if(!t)return e.split("");if(t instanceof RegExp)return e.split(t);if(-1==e.indexOf(t))o=e;else for(var i=e.split(""),a="",s=0,u=i.length;s<u;s++){var l=i[s],c=n.indexOf(l);c>-1&&(!a||a==l)&&(a=a?"":n[c]),l!=t||a?o+=l:(r.push(o),o="")}return o&&r.push(o),r},s.filter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[];if(n&&!Array.isArray(n)&&(n=[n]),"function"!=typeof t){var o=t?(t+"").toLowerCase():"";t=function(e){return(e?(e+"").toLowerCase():"").match(o)}}for(var i=0,a=e.length;i<a;i++){var s=e[i],u=!1;if(!n&&t(s))u=!0;else if(n)for(var l=0,c=n.length;l<c;l++){var f=n[l];f=Array.isArray(f)?f:[f];var h=f?this.getPropertyByKeys(f,s):s;t(h)&&(u=!0)}u&&r.push(s)}return r},s.sort=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e=e.slice(),!0===n?(n=[],r=[!0]):!1===n&&(n=[],r=[!1]),Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);var o=n.length;return e.sort(function(e,i){var a=0,s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e instanceof Date&&(e=e.getTime()),t instanceof Date&&(t=t.getTime()),e>t?n?-1:1:e<t?n?1:-1:0};return o?function u(){if(a>=o)return 0;var l=n[a];Array.isArray(l)||(l=[l]);var c=t.getPropertyByKeys(l,e),f=t.getPropertyByKeys(l,i),h=s(c,f,!1===r[a]);return 0!==h?h:(a++,u())}():s(e,i,!1===r[a])}),e},s.includeKeys=function(e,t){for(var n={},r=Object.keys(e),o=0,i=r.length;o<i;o++){var a=r[o];-1!=t.indexOf(a)&&(n[a]=e[a])}return n},s.excludeKeys=function(e,t){for(var n={},r=Object.keys(e),o=0,i=r.length;o<i;o++){var a=r[o];-1==t.indexOf(a)&&(n[a]=e[a])}return n},s.isScopeProxy=function(e){return!(!e||"object"!=(void 0===e?"undefined":o(e))||!e.__isProxy)},s.isPlainObject=function(e){return!(!e||"object"!=(void 0===e?"undefined":o(e))||e.constructor!=Object&&e.constructor!=Array)},s.copy=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=(void 0===e?"undefined":o(e))||!e)return e;n=r({nested:!0,enumerable:!0},n);return function e(i){i=t.isScopeProxy(i)?i.__target:i;for(var a=n.enumerable?Object.keys(i):Object.getOwnPropertyNames(i),s=Array.isArray(i)?[]:{},u=0,l=a.length;u<l;u++){var c=a[u],f=i[c];f=f&&"object"==(void 0===f?"undefined":o(f))&&n.nested?e(f):f,i.propertyIsEnumerable(c)?s[c]=f:Object.defineProperty(s,c,r({},Object.getOwnPropertyDescriptor(i,c),{value:f}))}return s}(e)},s.makeAttributeValue=function(e){return!1===e||null===e||void 0===e?"":e instanceof a.default?"[object Event]":"function"==typeof e?"[object Function]":"object"==(void 0===e?"undefined":o(e))?Object.prototype.toString.call(e):e+""},s.compare=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if("function"==typeof e&&"function"==typeof t)return e.toString()===t.toString();if("object"==(void 0===e?"undefined":o(e))&&"object"==(void 0===t?"undefined":o(t))){if(null===e||null===t)return e===t;n=r({enumerable:!0},n);var i=function(e){for(var t=Array.isArray(e)?[]:{},r=n.enumerable?Object.keys(e):Object.getOwnPropertyNames(),o=0,i=r.length;o<i;o++){var a=r[o];void 0!==e[a]&&(t[a]=e[a])}return t};n.ignoreUndefined&&(e=i(e),t=i(t));var a=n.enumerable?Object.keys(e):Object.getOwnPropertyNames(),s=n.enumerable?Object.keys(t):Object.getOwnPropertyNames();if(a.length!=s.length)return!1;e=this.isScopeProxy(e)?e.__target:e,t=this.isScopeProxy(t)?t.__target:t;for(var u=0,l=a.length;u<l;u++){var c=a[u];if(!this.compare(e[c],t[c]))return!1}return!0}return e===t},s.comparePreviousValue=function(e,t,n,r){return e===t&&this.compare(e,n,r)},s.encodeHtmlEntities=function(e){var t=document.createElement("div"),n=void 0;return t.textContent=e,n=t.innerHTML,t.remove(),t=null,n},s.decodeHtmlEntities=function(e){var t=document.createElement("textarea"),n=void 0;return t.innerHTML=e,n=t.value,t.remove(),t=null,n},s.toCamelCase=function(e){return e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})},s.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},s.toDashCase=function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},s.getPropertyByKeys=function(e,t){var n=void 0,r=e.length,i=0;return e.reduce(function(e,t){return i++,"object"!=(void 0===e?"undefined":o(e))?e:void 0===e[t]?{}:(i==r&&(n=e[t]),e[t])},t),n},s.hasPropertyByKeys=function(e,t){var n=!1,r=e.length,i=0;return e.reduce(function(e,t){return i++,"object"!=(void 0===e?"undefined":o(e))?!!e:e.hasOwnProperty(t)?(i==r&&(n=e.hasOwnProperty(t)),e[t]):{}},t),n},s.setPropertyByKeys=function(e,t,n){var r=void 0,i=e.length,a=0;return e.reduce(function(e,t){if(a++,"object"==(void 0===e?"undefined":o(e)))return e.hasOwnProperty(t)||(e[t]=void 0),e[t]=n(a==i,e[t]),r=e,e[t]},t),r},s.deletePropertyByKeys=function(e,t,n){var r=e.length,i=void 0,a=0;return e.reduce(function(e,t){if(a++,"object"==(void 0===e?"undefined":o(e)))return e.hasOwnProperty(t)?a==r?(i=e[t],(!n||n(i))&&delete e[t],i):e[t]:{}},t),i},s.getEnumerablePropertyTarget=function(e,t){return function e(n){if(n.propertyIsEnumerable(t))return n;var r=Object.getPrototypeOf(n);return r?e(r):null}(e)},s.getOwnPropertyTarget=function(e,t){return function e(n){if(n.hasOwnProperty(t))return n;var r=Object.getPrototypeOf(n);return r?e(r):null}(e)},s.createRandomString=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Math.random().toString(36).substring(2,e+2),r="",o=0,i=n.length;o<i;o++)Math.random()>.66?r+=n[o].toUpperCase():r+=n[o];return t&&t(r)?this.createRandomString(e,t):r},t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e;r(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return s.urlAttribute="src",s}return i(t,e),a(t,[{key:"compiled",value:function(){this.attr("url",this.setUrl)}},{key:"setUrl",value:function(e){this.attrs[this.urlAttribute]=e}}]),t}(u.default);l.matches="[url]",t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.systemAttributes=t.evaluationRegexGlobal=t.evaluationRegex=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(7),h=r(f),p=n(4),_=r(p),d=n(9),y=r(d),v=n(1),b=r(v),m=t.evaluationRegex=/\${(((?!\${).)*)}/,g=t.evaluationRegexGlobal=new RegExp(m.source,"g"),w=t.systemAttributes=["component","scope"],k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),!(t instanceof Element))throw new Error("You must pass an html element to the component constructor");this.__isMounted=!1,this.__isCompiled=!1,this.__isResolved=!1,this.__cancelled=!1,this.__prevent=!1,this.__bindings={},this.__evaluatingEvent=null,this.__recompiling=!1,this.__compiling=null,this.__disableProxy={},this.__disableAttrTriggering=!1,this.__children=[],this.__parent=null,this.__parents=[],this.__attrs={},this.__attrLinks={},this.__storeLinks={},this.__attributeOf=null,this.__evaluationComponent=this,this.scope=n,this.el=t}return u(e,null,[{key:"define",value:function(){c.default.component("component",e)}},{key:"parse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=s({},c.default.options.globals,n);var r=[],o=[],i=b.default.split(t,";",['"',"'","`"]);i[i.length-1]="return "+i[i.length-1];for(var a in n)r.push(a),o.push(n[a]);return(new(Function.prototype.bind.apply(Function,[null].concat(r,[""+i.join("; ")])))).apply(e,o)}}]),u(e,[{key:"__createCompilationOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s({checkChanges:!1,setEvents:!0,setParents:!0,setBooleanAttributes:!0,defineAttributes:!0},e)}},{key:"__createRecompilationOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s({},this.__createCompilationOptions(),{setEvents:!1,setParents:!1,setBooleanAttributes:!1,defineAttributes:!1},e)}},{key:"__recompile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__isMounted=!1,this.__recompiling=!0,this.__evaluationComponent.__disableProxy={},this.__compiling=this.__createRecompilationOptions(e),this.__compiling.setEvents&&this.__setEvents(),this.__compiling.setParents&&this.__setParents(),this.__compiling.setBooleanAttributes&&this.__setBooleanAttributes(),this.__compiling.defineAttributes&&this.__defineAttributes()}},{key:"__create",value:function(){var e=this;this.__compiling=this.__createCompilationOptions(),this.__initialize(),this.__setEvents(),this.__setParents(),this.__setBooleanAttributes(),this.__defineAttributes(),c.default.isolate(function(){return e.created(e.attrs)})}},{key:"__compile",value:function(){var e=this,t=this.__controlAttributes||!this.__evaluateParent,n=Promise.resolve();this.__attributeOf=t?this:this.__evaluateParent.__akili,(!this.__recompiling||this.__compiling.newParent||this.__controlAttributes)&&this.__interpolateAttributes(this.el,this.__attributeOf);!function t(n,r){for(var o=0,i=n.length;o<i;o++){var a=n[o];3==a.nodeType&&e.__initializeNode(a,r,!0)?e.__evaluateNode(a,e.__compiling.checkChanges):1!=a.nodeType||a.__akili||(e.__interpolateAttributes(a),t(a.childNodes,a))}}(this.el.childNodes,this.el),this.__isMounted=!0;var r=void 0;return this.__recompiling?c.default.isolate(function(){e.attrs.onRecompiled&&e.attrs.onRecompiled.trigger(void 0,{bubbles:!1}),e.recompiled()}):(r=c.default.isolate(function(){return e.attrs.onCompiled&&e.attrs.onCompiled.trigger(void 0,{bubbles:!1}),e.compiled()}),this.constructor.templateUrl&&(n=_.default.get(this.constructor.templateUrl,{cache:this.constructor.templateCache}).then(function(t){return e.el.innerHTML=e.__content,c.default.setTemplate(e.el,t.data),delete e.__content,c.default.compile(e.el,{recompile:!0})}))),this.__recompiling=!1,this.__compiling=null,n.then(function(){return e.__isCompiled=!0,r})}},{key:"__resolve",value:function(){var e=this;return this.__recompiling?Promise.resolve():(this.attrs.onResolved&&this.attrs.onResolved.trigger(void 0,{bubbles:!1}),Promise.resolve(this.resolved()).then(function(t){return e.__isResolved=!0,t}))}},{key:"__initialize",value:function(){var e=c.default.getAkiliParents(this.el,!1),t=this.constructor.scope||c.default.Scope,n=void 0,r=c.default.__root===this.el;this.el.__akili=this,e?n=new t(this.el.getAttribute("scope")||c.default.createScopeName(),this.el,this):(n=new t(r?"root":c.default.createScopeName(),this.el,this),r&&(c.default.root=this));var o=n,i=Object.assign(n,this.scope),a=this.constructor.controlAttributes,s=this.constructor.events;return this.constructor.template&&c.default.setTemplate(this.el,this.constructor.template),this.constructor.templateUrl&&(this.__content=this.el.innerHTML,this.el.innerHTML=""),this.__scope=o,this.__events=s,this.__controlAttributes=a,this.__saveAttributeProxyIn=this.constructor.saveAttributeProxyIn,this.__saveAttributeProxyOut=this.constructor.saveAttributeProxyOut,c.default.addScope(n),this.scope=this.__nestedObserve(i,[]),!0}},{key:"__setBooleanAttributes",value:function(){var e=this;this.booleanAttributes=[].concat(c.default.htmlBooleanAttributes,this.constructor.booleanAttributes);!function t(n){for(var r=0,o=n.attributes,i=o.length;r<i;r++){var a=o[r];if(-1!=e.booleanAttributes.indexOf(a.nodeName)){if(n.hasAttribute("boolean-"+a.nodeName))continue;n.setAttribute("boolean-"+a.nodeName,n.getAttribute(a.nodeName)||a.nodeName),n.removeAttribute(a.nodeName)}}for(var s=0,u=n.children.length;s<u;s++){var l=n.children[s];l.__akili||t(l)}}(this.el)}},{key:"__setEvents",value:function(){for(var e=0,t=this.__events.length;e<t;e++){var n=this.__events[e];!/^on-/i.test(n)&&(n="on-"+n),this.el.hasAttribute(n)||this.el.setAttribute(n,"")}}},{key:"__setParents",value:function(){var e=c.default.getAkiliParents(this.el);if(e.length){for(var t=this.__parent!==e[0],n=null,r=0,o=e.length;r<o;r++){var i=e[r];if(!i.__akili.constructor.transparent){n=i;break}}this.__compiling.newParent=t,t&&this.__detach(),this.constructor.transparent&&(this.__evaluationComponent=n.__akili),this.__evaluateParent=n,this.__parent=e[0],this.__parents=e,this.scope.__parent=this.__evaluateParent.__akili.scope,!this.__recompiling&&this.__parent.__akili.__addChild(this.el),Object.setPrototypeOf(this.scope,this.__parent.__akili.__scope)}}},{key:"__addChild",value:function(e){this.__children.push(e)}},{key:"__spliceChild",value:function(e){for(var t=0,n=this.__children.length;t<n;t++){this.__children[t]===e&&(this.__children.splice(t,1),t--,n--)}}},{key:"__getParsedExpression",value:function(e){return e}},{key:"__checkEvaluation",value:function(e){if(!Object.keys(e.__properties).length)return!0;for(var t in e.__properties)if(e.__properties.hasOwnProperty(t)){var n=e.__properties[t],r=b.default.getPropertyByKeys(n.keys,n.component.__scope);if(!b.default.comparePreviousValue(r,n.value,n.copy))return!0}return!1}},{key:"__checkNodePropertyChange",value:function(e,t,n){var r=this.__getNodeProperty(e,t);return!r||!b.default.comparePreviousValue(n,r.value,r.copy)}},{key:"__evaluate",value:function(e){var t=this,n=0,r=void 0,o=void 0;if(e.__component.parents(function(e){return e.__prevent}).length)return e.__expression;if(!(e instanceof window.Attr)&&e.__component.__prevent)return e.__expression;var i=e.__expression.replace(g,function(i,s){n++;var u=void 0,l=[],f={},h={},p=e.__component.__getParsedExpression(s);c.default.__evaluation={node:e,list:[],component:e.__component};try{u=t.constructor.parse(t.__evaluationComponent.scope,p)}catch(t){var _=e.__component.el.tagName,d=e.__component.el.getAttribute("component"),y=(d||_).toLowerCase(),v=e.__element.tagName.toLowerCase(),m=e instanceof window.Attr?e.name.toLowerCase():"",g=[t.message,e.__expression];throw m&&g.push("[attribute "+m+"]"),g=g.concat(["[element "+v+"]","[component "+y+"]"]),"Expression error: "+g.join("\n\tat ")}c.default.__evaluation&&(l=c.default.__evaluation.list,c.default.__evaluation.list=null,c.default.__evaluation=null);for(var w=l.length-1;w>=0;w--){var k=l[w],O=k.component.__createKeysHash(k.keys),P=k.component.__createKeysHash(k.parents);if(!k.notBinding&&!f[O]){var j=b.default.getPropertyByKeys(k.parents,k.component.__scope),E=e.__attributeOf||e.__component;j&&"object"==(void 0===j?"undefined":a(j))&&(c.default.options.debug&&50==h[P]&&console.warn(["For higher performance, don't loop Proxy arrays/objects inside expression functions, or use Akili.unevaluate() to wrap you code.",""+e.__expression,'scope property "'+k.parents.join(".")+'"'].join("\n\tat ")),h[P]?h[P]++:h[P]=1),b.default.isScopeProxy(j)&&k.component!==E.__evaluationComponent&&k.component===k.realComponent||(k.component.__bindAndSetProperty(e,k.keys,k.evaluated),f[O]=!0)}}if(f=null,l=null,e instanceof window.Attr)return o=i,r=u,b.default.makeAttributeValue(u);if("object"==(void 0===u?"undefined":a(u)))try{return JSON.stringify(u)}catch(e){return u}return u});if(e instanceof window.Attr){var s=i,u=!1;1==n&&o&&e.__expression==o&&(s=r);var l=e.nodeName.replace(/^boolean-(.+)/i,"$1"),f=b.default.toCamelCase(l);if(l!=e.nodeName&&(u=!0,s=!!s),e.__attributeOn){var h=e.__attributeOn;!h.__saveAttributeProxyIn&&(s=b.default.copy(s)),h.__disableAttributeSetter=!0,h.attrs[f]=s,h.__disableAttributeSetter=!1,h.__isMounted&&h.__attrTriggerByName(f,s)}else if(u){var p=e.__element;s?p.setAttribute(f,"true"):p.removeAttribute(f)}}return i}},{key:"__bindAndSetProperty",value:function(e,t,n){var r=this.__getBoundNode(t,e),o=b.default.getPropertyByKeys(t,this.__scope);r||this.__bind(t,{node:e}),this.__setNodeProperty(e,t,o,n)}},{key:"__evaluateNested",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.__scope,r=[];if(t)r.push({keys:e,value:b.default.getPropertyByKeys(e,n)});else for(var i=[],a=0,s=e.length;a<s;a++){var u=e[a],l=void 0;i=[].concat(o(i),[u]),l=b.default.getPropertyByKeys(i,n),r.push({keys:i,value:l})}var c=r.length,f=function(e){for(var t=e.__akili,n=0;n<c;n++){var o=r[n],i=t.__getBind(o.keys);if(i&&i.__data)for(var a=0,s=i.__data.length;a<s;a++){var u=i.__data[a];if(t.__checkNodePropertyChange(u.node,o.keys,o.value)){t.__disableKeys(o.keys);var l=t.__getNodeProperty(u.node,o.keys);l&&l.evaluated&&t.scope.__set(o.keys,o.value,!1,!0),t.__evaluateNode(u.node,!1);for(var f in u.node.__properties)if(u.node.__properties.hasOwnProperty(f)){var h=u.node.__properties[f],p=b.default.getPropertyByKeys(h.keys,h.component.__scope);h.component.__setNodeProperty(u.node,h.keys,p)}t.__enableKeys(o.keys)}}}return t};f(this.el),function e(t){for(var n=0,r=t.length;n<r;n++){e(f(t[n]).__children)}}(this.__children)}},{key:"__evaluateByKeys",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.__getBind(e);o&&function e(r,o){for(var i in r)if(r.hasOwnProperty(i)&&!n.__isSystemBindingKey(i)){var s=[].concat(o,[i]),u=s.slice(),l=!1,c=r[i],f=void 0;u.shift(),f=b.default.hasPropertyByKeys(u,t),t&&"object"==(void 0===t?"undefined":a(t))&&!f&&(l=!0),c&&"object"==(void 0===c?"undefined":a(c))&&e(c,s),n.__evaluateNested(s,!0),null!==t&&"object"==(void 0===t?"undefined":a(t))&&f||(n.__unbind(s),l&&b.default.deletePropertyByKeys(u,t))}}(o,[].concat(e)),this.__evaluateNested(e),r&&(this.__unbind(e),r&&b.default.deletePropertyByKeys(e,this.__scope))}},{key:"__evaluateEvent",value:function(e,t,n){var r=m.exec(e.__expression),o=void 0;if(r)return this.__evaluatingEvent={el:t,component:this,event:n,node:e},this.__disableProxy={},o=this.constructor.parse(this.__evaluationComponent.scope,r[1],{event:n}),this.__evaluatingEvent=null,o}},{key:"__evaluateNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e instanceof window.Attr?"value":"nodeValue";if(!t||this.__checkEvaluation(e)){var r=this.__evaluate(e);e[n]!=r&&(e[n]=r)}return e[n]}},{key:"__initializeAttribute",value:function(e,t,n){if(e&&-1==w.indexOf(e.nodeName)){this.__initializeNode(e,t);var r=e.nodeName.replace(/^on-(.+)/i,"$1"),o=b.default.toCamelCase(e.nodeName),i=n||this;if(r!=e.nodeName){if(e.__event)return;var a=new c.default.EventEmitter(r,t,i);return e.__expression&&a.bind(function(n){return i.__evaluateEvent(e,t,n)}),e.__event=a,t.setAttribute(e.nodeName,b.default.makeAttributeValue(a)),void(n&&(this.__disableAttributeSetter=!0,this.attrs[o]=a,this.__disableAttributeSetter=!1))}n&&(e.__attributeOn=this,e.__attributeOf=i);var s=!!this.__compiling&&this.__compiling.checkChanges;t.setAttribute(e.nodeName,i.__evaluateNode(e,s))}}},{key:"__initializeNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.__initialized)return!0;var r=e[e instanceof window.Attr?"value":"nodeValue"].trim(),o=!!n&&m.test(r);return!(n&&!o)&&(e.__expression=r,e.__properties={},e.__attributeOf=null,e.__attributeOn=null,e.__event=null,e.__hasBindings=o,e.__initialized=!0,e.__component=this,e.__element=t,!0)}},{key:"__deinitializeNode",value:function(e){e.__event&&(e.__event.unbind(),e.__event=null),e.__hasBindings&&this.__parent&&this.__parent.__akili.__evaluationComponent.__unbindByNodes([e]),delete e.__expression,delete e.__properties,delete e.__attributeOf,delete e.__attributeOn,delete e.__event,delete e.__hasBindings,delete e.__initialized,delete e.__component,delete e.__element}},{key:"__interpolateAttributes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0,r=e.attributes,o=r.length;n<o;n++)this.__initializeAttribute(r[n],e,t)}},{key:"__defineAttributes",value:function(){var e=this,t=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.__disableAttributeSetter){var o=e.el.getAttributeNode(t);if(r)return o&&e.__deinitializeNode(o),void e.el.removeAttribute(t);o?(o.value=n,e.__deinitializeNode(o)):(e.el.setAttribute(t,n),o=e.el.getAttributeNode(t)),e.__initializeAttribute(o,e.el,e.__attributeOf)}};this.attrs=new Proxy(this.__attrs,{get:function(e,t){return"__isProxy"==t||e[t]},set:function(n,r,o){var i=b.default.toDashCase(r);return-1!=e.booleanAttributes.indexOf(i)&&(i="boolean-"+i,o?e.el.setAttribute(r,o):e.el.removeAttribute(r)),n[r]=o,t(i,b.default.makeAttributeValue(o)),!0},deleteProperty:function(e,n,r){var o=b.default.toDashCase(n);return t(o,b.default.makeAttributeValue(r),!0),delete e[n],!0}})}},{key:"__observe",value:function(e,t){var n=this;return new Proxy(e,{get:function(r,o){if("__isProxy"==o)return!0;if("__target"==o)return e;if("__component"==o)return n;if("__keys"==o)return t;if(n.__isSystemKey(o))return r[o];if(c.default.__evaluation){var i=[].concat(t,[o]),s=!1,u=!b.default.hasPropertyByKeys(i,n.__scope),l=n,f=i.slice();if(r instanceof h.default){var p=b.default.getOwnPropertyTarget(r,o);p&&p instanceof h.default&&(l=p.__component)}if(c.default.__wrapping&&i.length>1)return r[o];for(var _=c.default.__evaluation.component.parents(function(e){return e instanceof c.default.components.For}),d=0,y=_.length;d<y;d++)for(var v=0,m=i.length;v<m;v++){var g=_[d].data,w=b.default.getPropertyByKeys(f,l.__scope);if(w&&"object"==(void 0===w?"undefined":a(w))&&g===w)return r[o];f.pop()}return o in r?b.default.getEnumerablePropertyTarget(r,o)||(s=!0):r[o]=void 0,n.__bindNode(c.default.__evaluation.list,l,i,t,r[o],s,u),r[o]}return r[o]},set:function(e,r,o){if(n.__isSystemKey(r))return e[r]=o,!0;"function"==typeof e[r]&&(o=c.default.wrapFunction(o));var i=[].concat(t,[r]);if(n.__checkDisablement(i))return e[r]=o,!0;var a=c.default.joinBindingKeys(i);e:if(t.length>0){var s=t.length>1?b.default.getPropertyByKeys(t.slice(0,-1),n.__scope):n.__scope;for(var u in s)if(s.hasOwnProperty(u)&&s[u]&&s[u].__target===e)break e;return e[r]=o,!0}return n.__storeLinks[a]&&n.__storeTriggerByKeys(i,o),n.__attrLinks[a]&&n.__attrTriggerByKeys(i,o),e[r]=n.__nestedObserve(o,i),c.default.__isolation?(n.__createIsolationObject(t,r,!1),!0):(n.__isMounted&&n.__evaluateByKeys(i,o),!0)},deleteProperty:function(e,r){var o=[].concat(t,[r]);return n.__checkDisablement(o)?(delete e[r],!0):n.__isSystemKey(r)?(delete e[r],!0):c.default.__isolation?(delete e[r],n.__createIsolationObject(t,r,!0),!0):(delete e[r],n.__evaluateByKeys(o,void 0,!0),!0)}})}},{key:"__createKeysHash",value:function(e){return this.__scope.__name+"."+c.default.joinBindingKeys(e)}},{key:"__disableKeys",value:function(e){this.__disableProxy[e?this.__createKeysHash(e):"__all"]=!0}},{key:"__enableKeys",value:function(e){delete this.__disableProxy[e?this.__createKeysHash(e):"__all"]}},{key:"__checkDisablement",value:function(e){return!!this.__disableProxy.__all||this.__disableProxy[this.__createKeysHash(e)]}},{key:"__storeTriggerByKeys",value:function(e,t){var n=this.__storeLinks[c.default.joinBindingKeys(e)];if(n&&n.length){t=b.default.copy(t),this.__disableKeys(e);for(var r=0,o=n.length;r<o;r++){var i=n[r];this.__storeTriggerByName(i.name,t)}this.__enableKeys(e)}}},{key:"__storeTriggerByName",value:function(e,t){var n=this;y.default.__target[e]=t;var r=c.default.__storeLinks[e];if(r&&r.length)for(var o=0,i=r.length;o<i;o++){(function(e,o){var i=r[e],a=i.component;if(a===n)return"continue";if(i.fn)return c.default.unisolate(function(){return i.fn.call(a,t)}),"continue";var s=b.default.getPropertyByKeys(i.keys,a.__scope);!b.default.compare(s,t)&&a.scope.__set(i.keys,t)})(o)}}},{key:"__storeByKeys",value:function(e,t){if(!t)throw new Error('Store link "'+e+'" must have the scope property name');Array.isArray(t)||(t=[t]),this.scope.__set(t,y.default[e]);var n=c.default.joinBindingKeys(t),r=void 0;this.__storeLinks[n]||(this.__storeLinks[n]=[]);for(var o=this.__storeLinks[n],i=o.length-1;i>=0;i--){var a=o[i];if(a.component===this&&a.name==e&&a.keyString==n)return}c.default.__storeLinks[e]||(c.default.__storeLinks[e]=[]),r={component:this,name:e,keys:t,keyString:n},this.__storeLinks[n].push(r),c.default.__storeLinks[e].push(r)}},{key:"__storeByFunction",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0===r.callOnStart?y.default.__target.hasOwnProperty(e):r.callOnStart;c.default.__storeLinks[e]||(c.default.__storeLinks[e]=[]);for(var i=c.default.__storeLinks[e],a=i.length-1;a>=0;a--){var s=i[a];if(s.component===this&&s.name==e&&s.fn===t)break}if(c.default.__storeLinks[e].push({component:this,name:e,fn:t}),o)return c.default.unisolate(function(){return t.call(n,y.default[e])})}},{key:"__unstoreByKeys",value:function(e,t){if(!t)throw new Error('You have to pass the scope property name for store link "'+e+'"');Array.isArray(t)||(t=[t]);var n=c.default.joinBindingKeys(t),r=this.__storeLinks[n];if(r.length){for(var o=r.length-1;o>=0;o--){var i=r[o],a=c.default.__storeLinks[i.name];if(i.component===this&&i.name==e&&i.keyString==n&&(r.splice(o,1),a&&a.length)){for(var s=a.length-1;s>=0;s--){var u=a[s];u.component===this&&u.keyString==n&&a.splice(s,1)}a.length||delete c.default.__storeLinks[e]}}r.length||delete this.__storeLinks[n]}}},{key:"__unstoreByFunction",value:function(e,t){if(c.default.__storeLinks[e]){for(var n=c.default.__storeLinks[e],r=n.length-1;r>=0;r--){var o=n[r];if(o.component===this&&o.name==e&&o.fn===t){n.splice(r,1);break}}n.length||delete c.default.__storeLinks[e]}}},{key:"__attrTriggerByKeys",value:function(e,t){var n=this;if(!this.__disableAttrTriggering){var r=this.__attrLinks[c.default.joinBindingKeys(e)];if(r&&r.length)return c.default.nextTick(function(){for(var e=0,o=r.length;e<o;e++){var i=r[e];if(!i.fn){var a="on"+b.default.capitalize(i.name);n.attrs[a]&&n.attrs[a].trigger(t,{bubbles:!0})}}})}}},{key:"__attrTriggerByName",value:function(e,t){var n=this,r=this.__attrLinks[e];if(r&&r.length)for(var o=0,i=r.length;o<i;o++)!function(e,o){var i=r[e];if(n.__disableAttrTriggering=!0,i.fn)c.default.unisolate(function(){return i.fn.call(n,t)});else{var a=b.default.getPropertyByKeys(i.keys,n.__scope);!b.default.compare(a,t)&&n.scope.__set(i.keys,t)}n.__disableAttrTriggering=!1}(o)}},{key:"__attrByKeys",value:function(e,t){if(!t)throw new Error('Attribute link "'+e+'" must have the scope property name');Array.isArray(t)||(t=[t]),e=b.default.toCamelCase(e),this.__disableAttrTriggering=!0,this.attrs.hasOwnProperty(e)&&this.scope.__set(t,this.attrs[e]),this.__disableAttrTriggering=!1;var n=c.default.joinBindingKeys(t);this.__attrLinks[n]||(this.__attrLinks[n]=[]);for(var r=this.__attrLinks[n],o=r.length-1;o>=0;o--){var i=r[o];if(i.name==e&&i.keyString==n)return}this.__attrLinks[n].push({name:e,keys:t,keyString:n})}},{key:"__attrByFunction",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0===r.callOnStart?this.attrs.hasOwnProperty(e):r.callOnStart;e=b.default.toCamelCase(e),this.__attrLinks[e]||(this.__attrLinks[e]=[]);for(var i=this.__attrLinks[e],a=i.length-1;a>=0;a--){var s=i[a];if(s.name==e&&s.fn===t)break}if(this.__attrLinks[e].push({name:e,fn:t}),o)return c.default.unisolate(function(){return t.call(n,n.attrs[e])})}},{key:"__unattrByKeys",value:function(e,t){if(!t)throw new Error('You have to pass the scope property name for attribute link "'+e+'"');Array.isArray(t)||(t=[t]);var n=c.default.joinBindingKeys(t),r=this.__attrLinks[n];if(r.length){for(var o=r.length-1;o>=0;o--){var i=r[o];i.name==e&&i.keyString==n&&r.splice(o,1)}r.length||delete this.__attrLinks[n]}}},{key:"__unattrByFunction",value:function(e,t){if(this.__attrLinks[e]){for(var n=this.__attrLinks[e],r=n.length-1;r>=0;r--){var o=n[r];if(o.name==e&&o.fn===t){n.splice(r,1);break}}n.length||delete this.__attrLinks[e]}}},{key:"__isSystemKey",value:function(e){return"__"==e||"_"==e[0]&&"_"==e[1]||-1!=["constructor"].indexOf(e)}},{key:"__nestedObserve",value:function(e,t){var n=this;return function e(t,r){if("object"!=(void 0===t?"undefined":a(t))||null===t)return t;if(!(b.default.isPlainObject(t)||b.default.isScopeProxy(t)||t instanceof h.default))return t;var o=t;e:if(t.__isProxy){if(o=t.__target,n.__disableProxyRedefining)break e;t.__component===n&&c.default.joinBindingKeys(r)==c.default.joinBindingKeys(t.__keys)||(o=b.default.copy(o,{nested:!1}),t=o)}else n.__disableProxyRedefining||t instanceof h.default||(o=b.default.copy(o,{nested:!1}),t=o);for(var i in o)if(o.hasOwnProperty(i)){var s=o[i],u=[].concat(r,[i]);o[i]=e(s,u)}return t.__isProxy?t:n.__observe(t,r)}(e,t||[])}},{key:"__createIsolationObject",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length?[e[0]]:[t],o=this.__createKeysHash(r);return e.length&&(n=!1),c.default.__isolation[o]||(c.default.__isolation[o]={updatedAt:(new Date).getTime(),component:this,keys:r}),void 0!==n&&(c.default.__isolation[o].isDeleted=n),c.default.__isolation[o]}},{key:"__bindNode",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=c.default.joinBindingKeys(r),u=this;if(e.length&&!i){var l=e.length-1,f=e[l];f.realComponent===this&&f.keysString==s&&(u=f.component),f.keysString==s&&f.component===u&&e.splice(l,1)}e.push({component:u,realComponent:t,keysString:c.default.joinBindingKeys(n),parents:r,keys:n,value:o,evaluated:a,notBinding:i})}},{key:"__isSystemBindingKey",value:function(e){return"__data"==e}},{key:"__getBind",value:function(e){return b.default.getPropertyByKeys(e,this.__bindings)||null}},{key:"__getBoundNode",value:function(e,t){var n=b.default.getPropertyByKeys(e,this.__bindings);if(!n||!n.__data||!n.__data.length)return null;for(var r=0,o=n.__data.length;r<o;r++){var i=n.__data[r];if(i.node===t)return i}return null}},{key:"__setNodeProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.__getNodeProperty(e,t),i=b.default.copy(n);if(o){var a=b.default.comparePreviousValue(n,o.value,o.copy);return o.value=n,o.copy=i,!a}return e.__properties[this.__createKeysHash(t)]={component:this,value:n,copy:i,keys:t,evaluated:r},!0}},{key:"__getNodeProperty",value:function(e,t){return e.__properties[this.__createKeysHash(t)]||null}},{key:"__deleteNodeProperty",value:function(e,t){var n=this.__scope.__name+"."+c.default.joinBindingKeys(t);delete e.__properties[n]}},{key:"__bind",value:function(e,t){b.default.setPropertyByKeys(e,this.__bindings,function(e,n){var r={__data:[]};return e?("object"==(void 0===n?"undefined":a(n))&&(r=n),r.__data||(r.__data=[]),r.__data.push(t),r):n||r})}},{key:"__unbind",value:function(e){var t=b.default.getPropertyByKeys(e,this.__bindings);if(t&&t.__data){for(var n=0,r=t.__data.length;n<r;n++){var o=t.__data[n].node;this.__deleteNodeProperty(o,e)}b.default.deletePropertyByKeys(e,this.__bindings,function(e){return!(Object.keys(e).length>1)||(e.__data=[],!1)})}}},{key:"__unbindByNodes",value:function(e){var t=this;!function n(r){for(var o in r)if(r.hasOwnProperty(o))if("__data"==o){for(var i=r[o]||[],a=i.length,s=0;s<a;s++){var u=i[s];-1!=e.indexOf(u.node)&&(i.splice(s,1),s--,a--)}a||delete r[o]}else t.__isSystemBindingKey(o)||n(r[o])}(this.__bindings),this.__clearEmptyBindings()}},{key:"__clearEmptyBindings",value:function(e){var t=this;!function e(n,r,o){for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];"__data"!=i||a&&a.length?t.__isSystemBindingKey(i)||(Object.keys(n[i]).length?e(n[i],n,i):delete n[i]):delete n[i]}!Object.keys(n).length&&r&&delete r[o]}(e||this.__bindings)}},{key:"__clearStoreLinks",value:function(){var e=c.default.__storeLinks;for(var t in e){for(var n=e[t],r=n.length-1;r>=0;r--){n[r].component===this&&n.splice(r,1)}n.length||delete e[t]}}},{key:"__removeChildren",value:function(){!function e(t){for(var n=0;n<t.length;n++){var r=t[n];e(r.__akili.__children),r.__akili.__remove(),n--}}(this.__children)}},{key:"__remove",value:function(){this.__detach(),this.__clearStoreLinks(),this.attrs.onRemoved&&this.attrs.onRemoved.trigger(void 0,{bubbles:!1}),this.removed(),c.default.removeScope(this.__scope.__name),this.el.remove()}},{key:"__detach",value:function(){this.__evaluateParent&&!this.__controlAttributes&&this.__evaluateParent.__akili.__unbindByNodes([].slice.call(this.el.attributes)),this.__parent&&this.__parent.__akili.__spliceChild(this.el)}},{key:"__destroy",value:function(){this.__removeChildren(),this.__remove()}},{key:"__empty",value:function(){var e=[];this.__removeChildren();!function t(n){for(var r=0,o=n.length;r<o;r++){var i=n[r];if(3==i.nodeType)e.push(i);else if(1==i.nodeType&&!i.__akili){for(var a=0,s=i.attributes,u=s.length;a<u;a++)e.push(s[r]);t(i.childNodes)}}}(this.el.childNodes),this.__unbindByNodes(e),this.el.innerHTML=""}},{key:"__getParent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=0;"object"!=(void 0===n?"undefined":a(n))&&(n=[n]);return function i(a){if(a){if((!n||-1!=n.indexOf(o))&&(!e||a.__akili.matches(e))){if(!t)return void r.push(a.__akili);r.push(a.__akili)}o++,i(a.__akili.__parent)}}(this.__parent),t?r:r[0]||null}},{key:"__getChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=0;"object"!=(void 0===n?"undefined":a(n))&&(n=[n]);return function i(a){for(var s=0,u=a.length;s<u;s++){var l=a[s];if((!n||-1!=n.indexOf(o))&&(!e||l.__akili.matches(e))){if(!t)return void r.push(l.__akili);r.push(l.__akili)}}o++;for(var c=0,f=a.length;c<f;c++)i(a[c].__akili.__children)}(this.__children),t?r:r[0]||null}},{key:"__getNear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.__parent)return null;var r=this.__parent.__akili.__children.slice(),o=[];n&&r.reverse();for(var i=0,a=r.length;i<a;i++){var s=r[i];if(s===this.el)break;e&&!s.__akili.matches(e)||o.push(s.__akili)}return o.reverse(),t?o:o.length?o[0]:null}},{key:"store",value:function(e,t){if(!this.__isMounted)throw new Error('Method "store" must be called after the compilation. For example, in "compiled" method.');return"function"==typeof t?this.__storeByFunction.apply(this,arguments):this.__storeByKeys.apply(this,arguments)}},{key:"attr",value:function(e,t){if(!this.__isMounted)throw new Error('Method "attr" must be called after the compilation. For example, in "compiled" method.');return"function"==typeof t?this.__attrByFunction.apply(this,arguments):this.__attrByKeys.apply(this,arguments)}},{key:"unstore",value:function(e,t){if(!this.__isMounted)throw new Error('Method "unstore" must be called after the compilation. For example, in "compiled" method.');return"function"==typeof t?this.__unstoreByFunction.apply(this,arguments):this.__unstoreByKeys.apply(this,arguments)}},{key:"unattr",value:function(e,t){if(!this.__isMounted)throw new Error('Method "unattr" must be called after the compilation. For example, in "compiled" method.');return"function"==typeof t?this.__unattrByFunction.apply(this,arguments):this.__unattrByKeys.apply(this,arguments)}},{key:"matches",value:function(e){return"function"==typeof e?e(this):this.el.matches(e)}},{key:"parent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(e,!1,t)}},{key:"parents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(e,!0,t)}},{key:"child",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(e,!1,t)}},{key:"children",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(e,!0,t)}},{key:"before",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!0,!1)}},{key:"after",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!0,!0)}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!1,!1)}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!1,!0)}},{key:"appendTo",value:function(e){return e.appendChild(this.el),c.default.compile(this.el,{recompile:{setParents:!0,checkChanges:!1}})}},{key:"cancel",value:function(){this.__cancelled=!0}},{key:"prevent",value:function(){this.__prevent=!0}},{key:"empty",value:function(){return this.__empty.apply(this,arguments)}},{key:"remove",value:function(){return this.__destroy.apply(this,arguments)}},{key:"created",value:function(){}},{key:"compiled",value:function(){}},{key:"recompiled",value:function(){}},{key:"resolved",value:function(){}},{key:"removed",value:function(){}}]),e}();k.matches="",k.booleanAttributes=[],k.events=[],k.controlAttributes=!1,k.saveAttributeProxyIn=!1,k.saveAttributeProxyOut=!1,k.transparent=!1,k.template="",k.templateUrl="",k.scope=null,t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(0),f=r(c),h=t.Request=function(){function e(t,n){o(this,e),this.__cache={},this.getHeaders=function(e){for(var t={},n=e.getAllResponseHeaders(),r=n.split("\r\n"),o=0,i=r.length;o<i;o++){var a=r[o],s=a.indexOf(": ");if(s>0){var u=a.substring(0,s),l=a.substring(s+2);t[u]=l}}return t},this.baseUrl=t?t.replace(/\/$/,"")+"/":"",this.defaults=a({statusErrorsPattern:/^([^23])|404/,cache:!1},n||{})}return s(e,[{key:"query",value:function(e){var t=this;return new Promise(function(n,r){e=a({},t.defaults,e||{}),e.url=t.baseUrl?""+t.baseUrl+e.url.replace(/^\//,""):e.url,e.method=e.method||"GET";var o=new XMLHttpRequest,i=t.transformBefore(o,e);if(o=i.xhr,e=i.options,"function"==typeof e.onStart&&e.onStart(o),e.headers=e.headers||{},e.json?(!0!==e.json&&(e.body=JSON.stringify(e.json)),e.headers["content-type"]="application/json",e.responseType=e.responseType||"json"):e.form&&(e.body=t.createFormData(e.form),e.headers["content-type"]="multipart/form-data"),e.params){var s=t.paramsToQuery(e.params);s&&(e.url+="?"+s)}var u=null,l="function"==typeof e.cache?e.cache(e):e.cache;if(window.AKILI_SERVER&&!f.default.__init&&(l=!0),"GET"!=e.method.toUpperCase()||e.body&&"string"!=typeof e.body||(u=t.createCacheHash({url:e.url,method:e.method,user:e.user,password:e.password,body:e.body})),l&&u){var c=t.getCache(u),h=(new Date).getTime();if(c&&(!0===l||h-c.createdAt<=l))return n(t.transformAfter(c.result))}o.open(e.method,e.url,!0,e.user,e.password),e.hasOwnProperty("timeout")&&(o.timeout=e.timeout),e.responseType&&(o.responseType=e.responseType),e.withCredentials&&(o.withCredentials=e.withCredentials);for(var p=Object.keys(e.headers),_=0,d=p.length;_<d;_++){var y=p[_];o.setRequestHeader(y,e.headers[y])}"function"==typeof e.onProgress&&(o.onprogress=function(){return e.onProgress(o)}),o.onload=function(){var i={response:o.response,status:o.status,readyState:o.readyState,statusText:o.statusText,withCredentials:o.withCredentials,responseType:o.responseType,responseText:"text"==o.responseType?o.responseText:"",responseXML:"document"==o.responseType?o.responseXML:"",responseURL:o.responseURL,timeout:o.timeout,headers:t.getHeaders(o)},a=t.transformAfter(i);if((o.status+"").match(e.statusErrorsPattern)){var s=new Error('Request to "'+e.url+'" returns failure status code '+o.status);return s.response=a,r(s)}u&&t.createCache(u,i),n(a)},o.ontimeout=function(){r(new Error('Request to "'+e.url+'" timed out'))},o.onerror=function(e){r(e)},o.send(e.body)})}},{key:"getCache",value:function(e){return this.__cache[e]||null}},{key:"createCache",value:function(e,t){this.__cache[e]={result:t,createdAt:(new Date).getTime()}}},{key:"removeCache",value:function(e){delete this.__cache[e]}},{key:"createCacheHash",value:function(e){for(var t=0,n=JSON.stringify(e),r=0;r<n.length;r++){t=(t<<5)-t+n.charCodeAt(r),t&=t}return t+""}},{key:"paramsToQuery",value:function(e){return e&&"object"===(void 0===e?"undefined":i(e))?Object.keys(e).map(function(t){var n=encodeURIComponent(t);if(Array.isArray(e[t]))return n=encodeURIComponent(t),e[t].map(function(e,t){return n+"["+t+"]="+encodeURIComponent(e)}).join("&");if(e[t]&&"object"===i(e[t])){var r=[];return Object.keys(e[t]).map(function(o){r.push(n+"["+o+"]="+encodeURIComponent(e[t][o]))}),r.join("&")}return n+"="+encodeURIComponent(e[t])}).join("&"):""}},{key:"paramsFromQuery",value:function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("="),a=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);a&&(Array.isArray(t[a])?t[a].push(s):t[a]?t[a]=[t[a],s]:t[a]=s)}return t}},{key:"createFormData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t||new FormData;for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var i=n?n+"["+o+"]":o;e[o]instanceof Date?r.append(i,e[o].toISOString()):l.default.isPlainObject(e[o])?this.createFormData(e[o],r,i):r.append(i,e[o])}return r}},{key:"transformBefore",value:function(e,t){return{xhr:e,options:t}}},{key:"transformAfter",value:function(e){return a({},e,{data:e.response})}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="GET",this.query(t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="DELETE",this.query(t)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="POST",this.query(t)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="PUT",this.query(t)}},{key:"patch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="PATCH",this.query(t)}}]),e}(),p=new h;p.setDefaults=function(){this.__instances={},this.__cache={}},p.addInstance=function(e,t){this.__instances[e]=t},p.removeInstance=function(e){delete this.__instances[e]},p.deinit=function(){this.setDefaults()},Object.defineProperty(p,"use",{get:function(){return p.__instances}}),p.Request=h,t.default=p,p.setDefaults()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e;r(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return s.valueKey="value",s.debounceInterval=500,s.debounceTimeout=null,s}return i(t,e),a(t,[{key:"created",value:function(){var e=this;this.el.hasAttribute("on-debounce")&&this.el.addEventListener("input",function(){e.debounceTimeout&&clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.attrs.onDebounce.trigger(void 0,{bubbles:!0})},e.debounceInterval)})}},{key:"compiled",value:function(){this.attr("focus",this.setFocus),this.attr("value",this.setValue),this.attr("debounce",this.setDebounce)}},{key:"removed",value:function(){this.debounceTimeout&&clearTimeout(this.debounceTimeout)}},{key:"setDebounce",value:function(e){this.debounceInterval=+e}},{key:"setFocus",value:function(e){e?this.setElementFocus():this.setElementBlur()}},{key:"setValue",value:function(e){this.el[this.valueKey]!==e&&(this.el[this.valueKey]=0===e?"0":e||"")}},{key:"setElementFocus",value:function(){this.el.focus()}},{key:"setElementBlur",value:function(){this.el.blur()}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chunk=t.Loop=void 0;var s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),f=r(c),h=n(0),p=r(h),_=n(1),d=r(_),y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.__iterator=null,s.__index=0,s.__count=0,s.__key="",s.__value=null,s.__comparisonValue=null,s.__promises=[],s.renderTypes=["asc","desc","mid"],s.renderType=s.renderTypes[0],s.iterators=[],s.iteratorRef=null,s.iteratorOuterHTML=null,s.chunkSize=500,s}return a(t,e),l(t,null,[{key:"define",value:function(){p.default.component("for",this),p.default.component("ol",this),p.default.component("ul",this),p.default.component("thead",this),p.default.component("tbody",this),p.default.component("tfoot",this),p.default.component("tr",this.Loop),p.default.component("loop",this.Loop)}}]),l(t,[{key:"created",value:function(){this.createIterator()}},{key:"compiled",value:function(){return this.attr("chunk",this.setChunkSize),this.attr("render",this.setRenderType),this.attr("in",this.draw)}},{key:"setRenderType",value:function(e){if(-1==this.renderTypes.indexOf(e))throw new Error('Wrong render type. It must be "asc", "desc" or "mid"');this.renderType=e}},{key:"setChunkSize",value:function(e){this.chunkSize=e}},{key:"createIterator",value:function(){for(var e=void 0,n=0,r=this.el.children.length;n<r;n++){var o=this.el.children[n];if("loop"==o.getAttribute("component")){e=o;break}e=o}e||(e=document.createElement("loop"),e.innerHTML=this.el.innerHTML,this.el.innerHTML="",this.el.appendChild(e));var i=e.getAttribute("component");if("loop"!=i){var a=p.default.component(i||e.tagName);if(a){if(!(a.prototype instanceof t)){var s=document.createElement("loop");s.appendChild(e),e=s}}else e.setAttribute("component","loop")}this.html=e.innerHTML,this.iteratorRef=e.nextSibling,this.iteratorOuterHTML=e.outerHTML,e.remove()}},{key:"createIteratorElement",value:function(){var e=document.createElement("template");return e.innerHTML=this.iteratorOuterHTML,e=e.content.firstChild}},{key:"loop",value:function(e,t,n){if(this.__index=n,this.__count++,this.__key=e,this.__value=t,this.__comparisonValue=d.default.copy(t),this.iterators.length>this.__count-1){var r=this.iterators[this.__count-1],o=r.comparison.copy;return this.__index!==r.index?r.setIndex():r.setIndex(!0),this.__key!==r.key?r.setKey():r.setKey(!0),d.default.compare(o,this.__comparisonValue,{ignoreUndefined:!0})?r.setValue(!0):r.setValue(),"asc"!==this.renderType&&this.el.insertBefore(r.el,this.getClosestElement(n)),this.__promises.push(p.default.compile(r.el,{recompile:!0})),r}var i=this.createIteratorElement();return i.innerHTML=this.html,this.el.insertBefore(i,"asc"!==this.renderType?this.getClosestElement(n):this.iteratorRef),this.__promises.push(p.default.compile(i)),this.iterators.push(i.__akili),i.__akili}},{key:"getClosestElement",value:function(e){var t=this.iteratorRef;return this.iterators.reduce(function(n,r){var o=r.index-e;return(!n||o<n)&&o>0?(t=r.el,o):n},0),t}},{key:"draw",value:function(e){var t=this;return"object"==(void 0===e?"undefined":u(e))&&null!==e||(p.default.options.debug&&console.warn('"For" component "in" attribute value type must be an object/array'),e=[]),this.chunk&&this.chunk.stop(),this.chunk=new b(this,e),this.data=e,this.dataCopy=d.default.copy(e),this.chunk.start().then(function(e){for(var n=t.__count,r=t.iterators.length;n<r;n++){t.iterators[n].__destroy(),t.iterators.splice(n,1),r--,n--}if(e)return"asc"!==t.renderType&&t.__children.sort(function(e,t){return e.__akili.index-t.__akili.index}),Promise.all(t.__promises).then(function(){t.reset(),t.attrs.onOut.trigger(t.data,{bubbles:!0})})})}},{key:"reset",value:function(){this.__index=0,this.__count=0,this.__key="",this.__value=null,this.__comparisonValue=null,this.__promises=[]}}]),t}(f.default);y.matches="[in]",y.events=["out","chunk"],y.saveAttributeProxyIn=!0,t.default=y;var v=t.Loop=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.for=null,s.html=s.el.innerHTML,s.isFor=s.el.hasAttribute("in"),s.isFor||s.el.parentNode.__akili instanceof y||s.cancel(),s}return a(t,e),l(t,[{key:"created",value:function(){if(this.__parent.__akili.__iterator=this,this.for=this.__parent.__akili,this.setIndex(!0),this.setKey(!0),this.setValue(!0),this.isFor)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){if(this.isFor)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"compiled",this).apply(this,arguments)}},{key:"setIndex",value:function(e){this.index=this.for.__index,this.scope.__set("loopIndex",this.index,!1,e)}},{key:"setKey",value:function(e){this.key=this.for.__key,this.scope.__set("loopKey",this.key,!1,e)}},{key:"setValue",value:function(e){this.value=this.for.__value,this.scope.__set("loopValue",this.value,!0,e),this.comparison={copy:this.for.__comparisonValue,value:this.for.__value}}},{key:"iterate",value:function(){}}]),t}(y);v.matches="",v.controlAttributes=!0;var b=t.Chunk=function(){function e(t,n){o(this,e),this.instance=t,this.arr=this.create(n),this.index=0}return l(e,[{key:"start",value:function(){var e=this;return Promise.resolve(this.next()).then(function(){return!e.cancelled})}},{key:"next",value:function(){var e=this;if(!this.cancelled&&this.arr.length&&!(this.index>this.arr.length-1))return this.draw(this.arr[this.index]).then(function(){return e.index++,p.default.nextTick(e.next.bind(e))})}},{key:"create",value:function(e){var t=Object.keys(e);return Array.isArray(e)&&(t=t.filter(function(e){return+e==e})),this["create"+d.default.capitalize(this.instance.renderType)](e,t)}},{key:"createAsc",value:function(e,t){for(var n=[],r=0,o=t.length;r<o;r++){r%this.instance.chunkSize==0&&n.push([]);var i=t[r];n[n.length-1].push({value:e[i],key:i,index:r})}return n}},{key:"createDesc",value:function(e,t){for(var n=[],r=t.length,o=r-1;o>=0;o--){(o+1)%this.instance.chunkSize!=0&&o!=r-1||n.push([]);var i=t[o];n[n.length-1].push({value:e[i],key:i,index:o})}return n}},{key:"createMid",value:function(e,t){for(var n,r=[[]],o=t.length,i=Math.floor(o/2),a=0,s=i;s>=0;s--)if(i){n=i+(i-s+1),a+=2,a%this.instance.chunkSize==0&&r.push([]);var u=t[s],l=t[n];r[r.length-1].push({value:e[u],key:u,index:s}),n<o&&r[r.length-1].push({value:e[l],key:l,index:n})}for(var c=a,f=o;c<f;c++){c%this.instance.chunkSize==0&&r.push([]);var h=t[c];r[r.length-1].push({value:e[h],key:h,index:c})}return r}},{key:"draw",value:function(e){for(var t=this,n=[],r=0,o=e.length;r<o;r++){var i=e[r];if(function(e,n,r){t.instance.loop(e,n,r).iterate(r)}(i.key,i.value,i.index),n.push(this.instance.__promises[this.instance.__promises.length-1]),this.cancelled)break}return Promise.all(n).then(function(){!t.cancelled&&t.instance.attrs.onChunk.trigger(e,{bubbles:!0})})}},{key:"stop",value:function(){this.index=0,this.cancelled=!0,this.instance.reset()}}]),e}();y.Loop=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=r(a),u=n(1),l=r(u),c=function(){function e(t,n,r){o(this,e),this.__name=t,this.__el=n,this.__component=r,n.setAttribute("scope",t)}return i(e,[{key:"__set",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(e)||(e=[e]),s.default.unisolate(function(){r&&(n.__component.__disableProxyRedefining=!0),l.default.setPropertyByKeys(e,o?n.__target:n,function(e,n){return e?t:n||{}}),r&&(n.__component.__disableProxyRedefining=!1)})}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(t,n,o){r(this,e),this.name=t,this.el=n,this.component=o,this.elComponent=this.el.__akili||null}return i(e,[{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.inEvaluating()||this.el.dispatchEvent(new CustomEvent(this.name,this.prepareOptions(o({detail:e},t))))}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.inEvaluating()||this.el.dispatchEvent(new e(this.name,this.prepareOptions(t)))}},{key:"prepareOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=o({bubbles:!0},e),this.elComponent&&!this.elComponent.__saveAttributeProxyOut&&(e.detail=s.default.copy(e.detail)),e}},{key:"inEvaluating",value:function(){var e=this.component.__evaluatingEvent;return!!e&&(e.el===this.el&&e.event.type===this.name&&e.component===this.component)}},{key:"bind",value:function(e){this.el.addEventListener(this.name,this.fn=e)}},{key:"unbind",value:function(){this.fn&&this.el.removeEventListener(this.name,this.fn)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(1),s=r(a),u=new Proxy({},{get:function(e,t){return"__target"==t?e:e[t]},set:function(e,t,n){return!!s.default.compare(e[t],n)||(n=s.default.copy(n),e[t]=n,i.default.root&&i.default.root.__storeTriggerByName(t,n),!0)},deleteProperty:function(e,t){return i.default.root&&i.default.root.__storeTriggerByName(t,void 0),delete e[t],!0}});t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),h=n(4),p=r(h),_=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.el.innerHTML="",s}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("route",this)}}]),s(t,[{key:"setTransition",value:function(e){var t=this,n=e.path.state,r=e.path.params,o=e.url,i=e.query,a=function(e){t.empty();var r="component";if(n.component){var o=!1;for(var i in f.default.__components){if(f.default.__components[i]===n.component){r=i,o=!0;break}}if(!o)throw new Error('Router state "'+n.name+'" has no defined component')}return t.el.innerHTML="<"+r+">"+e+"</"+r+">",f.default.compile(t.el,{recompile:!0})};return this.__scope.__transition={path:{state:n.name,data:e.path.data,params:r,parent:function e(t){return t.parent?t.parent.component?t.parent.component.__scope.__transition.path:e(t.parent):null}(e.path)},params:e.params,url:o,query:i},e.path.loaded?Promise.resolve().then(function(){return n.template?n.template:n.templateUrl?p.default.get(n.templateUrl).then(function(e){return e.data}):void 0}).then(function(e){return a(e)}):f.default.compile(this.el,{recompile:!0})}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=r(c),h=n(4),p=r(h),_=n(10),d=r(_),y=t.Transition=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,e),this.url=t,this.query=n,this.hash=r,this.previous=i,this.path=null,this.routes=[],this.states={},this.params={},this.__cancelled=!1}return s(e,[{key:"redirect",value:function(){this.cancel(),v.state.apply(v,arguments)}},{key:"setPath",value:function(e){e.parent=this.path||null,this.path=e,this.routes.push(e),this.states[e.state.name]=e,this.params=e.parent?a({},e.parent.params,e.params):e.params}},{key:"getRoute",value:function(e){for(var t=0,n=this.routes.length;t<n;t++){var r=this.routes[t];if(r.state===e)return r}return null}},{key:"hasState",value:function(e){return!!this.states[e.name]}},{key:"cancel",value:function(){this.__cancelled=!0}}]),e}(),v={};v.setDefaults=function(){this.baseUrl="/",this.states=[],this.hashMode=!0,this.__redirects=0,this.__init=!1,this.__options={},this.__paramRegex=/(:([\w\d-]+))/g,this.__routeSelector=function(e){return e instanceof d.default}},v.add=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"==(void 0===e?"undefined":i(e))&&(n=e,t=n.pattern,e=n.state,delete n.pattern,delete n.state),!e)throw new Error("Router state must have a name");var r={template:"",templateUrl:"",abstract:!1,component:null,handler:function(){}};if(l.default.options.debug&&n.component&&(n.template||n.templateUrl)&&console.warn('Router state "'+e+'" must only have a component or template option'),n.template||n.templateUrl||n.component||(n.abstract=!0),this.has(e))throw new Error('Router state "'+e+'" is already exists');return this.setState(e,t,a({},r,n)),this},v.remove=function(e){for(var t=0,n=this.states.length;t<n;t++)if(this.states[t].name==e)return void this.states.splice(t,1)},v.has=function(e){for(var t=0,n=this.states.length;t<n;t++)if(this.states[t].name==e)return!0;return!1},v.state=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=this.getState(e);if(!i)throw new Error("Not found route state with name "+e);var a=this.createStateUrl(i,t,n,r);(o.reload||a!==this.getUrl())&&(this.__options=o,this.setUrl(a))},v.back=function(){return window.history.back.apply(window.history,arguments)},v.go=function(){return window.history.go.apply(window.history,arguments)},v.forward=function(){return window.history.forward.apply(window.history,arguments)},v.location=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{reload:!1};if(this.__options=t,this.hashMode){var n=window.location.hash.replace("#","");window.location.hash=e,n===e&&this.changeState().catch(function(e){return console.error(e)})}else window.history.pushState(null,"",e)},v.init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=window.history.pushState;window.history.pushState=function(){var e=r.apply(this,arguments);return v.changeState().catch(function(e){return console.error(e)}),e},this.__onStateChangeHandler=function(){e.changeState().catch(function(e){return console.error(e)})},this.defaultUrl=t,this.hashMode=n,this.states.sort(function(e,t){return e=e.name.split(".").length,t=t.name.split(".").length,e-t});for(var o=0,i=this.states.length;o<i;o++)this.initState(this.states[o]);!this.states.length&&l.default.options.debug&&console.warn("You didn't add any routes to the router"),window.addEventListener("popstate",this.__onStateChangeHandler),this.__init=!0},v.initState=function(e){var t=[];if(e.children=[],t=e.name.split("."),t.pop(),e.level=e.abstract?null:t.length,t.length){var n=t.join("."),r=this.getState(n);if(!r)throw new Error('Not found parent route state "'+n+'" for "'+e.name+'"');null!==e.level&&r.abstract&&e.level--,e.fullPattern=this.splitSlashes(r.fullPattern+"/"+e.pattern),r.children.push(e)}else e.fullPattern=e.pattern},v.getState=function(e){for(var t=0,n=this.states.length;t<n;t++){var r=this.states[t];if(r.name==e)return r}return null},v.setState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a({},n,{name:e,pattern:t});return this.states.push(r),this.__init&&this.initState(r),r},v.removeState=function(e){for(var t=0,n=this.states.length;t<n;t++){if(this.states[t].name==e)return void this.states.splice(t,1)}},v.setUrl=function(e){this.hashMode?this.setHashUrl(e):this.setHistoryUrl(e)},v.setHistoryUrl=function(e){window.history.pushState(null,"",e)},v.setHashUrl=function(e){window.location.hash="#"+(e||"/")},v.getUrl=function(){return this.hashMode?this.getHashUrl():this.getHistoryUrl()},v.getHistoryUrl=function(){return window.location.pathname+window.location.search+window.location.hash},v.getHashUrl=function(){return window.location.hash.replace(/^#/,"")},v.getUrlQuery=function(){return this.hashMode?this.getHashUrlQuery():this.getHistoryUrlQuery()},v.getHistoryUrlQuery=function(){return p.default.paramsFromQuery(window.location.search.replace(/^\?/,""))},v.getHashUrlQuery=function(){return p.default.paramsFromQuery(window.location.hash.split("?")[1]||"")},v.createStateUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"object"!==(void 0===e?"undefined":i(e))&&(e=this.getState(e));var o=e.fullPattern.replace(this.__paramRegex,function(e,n,r){return t[r]||""});return o=o.replace(/^\^/,""),o=this.splitSlashes(o),Object.keys(n).length&&(o+="?"+p.default.paramsToQuery(n)),r=(r||"").replace("#",""),!this.hashMode&&r&&(o+="#"+r),o},v.splitSlashes=function(e){return e.replace(/[\/]+/g,"/")},v.getPatternContent=function(e,t){"object"!==(void 0===e?"undefined":i(e))&&(e=this.getState(e));var n=[],r=0,o={};t=t.split("?")[0],t=t.split("#")[0];var a=e.fullPattern.replace(this.__paramRegex,function(e,t,r){return n.push(r),"([^\\/]*)"}),s=new RegExp(a);return t.match(s)?(t.replace(s,function(e,t){t&&(o[n[r]]=t),r++}),{params:o}):null},v.isActiveState=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"!==(void 0===e?"undefined":i(e))&&(e=this.getState(e));var n=this.splitSlashes(this.getUrl().split("?")[0]+"/"),r=e.fullPattern.replace(this.__paramRegex,"([^\\/]*)"),o=t?r:this.splitSlashes("^"+r+"/$");return new RegExp(o).test(n)},v.inActiveState=function(e){return v.isActiveState(e,!0)},v.getRoute=function(e){var t=this,n=0;return function r(o){var i=o.child(t.__routeSelector);return i?n==e?i:(n++,r(i)):null}(l.default.root)},v.getArrayPatternContent=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n],i=this.getPatternContent(o,t);if(i)return a({state:o},i)}return null},v.getStatesByLevel=function(e){for(var t=[],n=0,r=this.states.length;n<r;n++){var o=this.states[n];if(!(o.level<e)){if(o.level>e)break;t.push(o)}}return t},v.isolate=function(e){this.__isolated=!0;var t=e();return this.__isolated=!1,t},v.changeState=function(){var e=this;if(this.__isolated)return Promise.resolve();if(this.__disableChange)return delete this.__disableChange,Promise.resolve();var t=this.getUrl(),n=this.hashMode?"":window.location.hash.replace("#",""),r=this.getUrlQuery(),o=v.transition||null,i=v.transition=new y(t,r,n,o),a=0;window.dispatchEvent(new CustomEvent("state-change",{detail:i}));var s=function s(u,l){if(!u.length)return l&&l();var c=e.getArrayPatternContent(u,t);if(!c)return l&&l();var h=c.state,p=c.params,_=h.abstract?null:e.getRoute(h.level);if(!_&&!h.abstract)throw new Error('Not found route component for state "'+h.name+'"');i.setPath({state:h,params:p,query:r,hash:n,component:_,loaded:!0}),a++;var d=o&&o.hasState(h),y=!0;if(d){var v=o.getRoute(h),b={params:v.params,query:v.query,hash:v.hash},m={params:p,query:r,hash:n};y=!f.default.compare(b,m)}i.path.loaded=y&&!1!==e.__options.reload,Promise.resolve(i.path.loaded?h.handler(i):i.path.data).then(function(e){return i.__cancelled?l&&l():(i.path.data=e,h.title&&(document.title="function"==typeof h.title?h.title(i):h.title),h.abstract?s(h.children,l):void _.setTransition(i).then(function(){s(h.children,l)}).catch(function(e){return l&&l(e)}))})};return new Promise(function(t,n){s(e.getStatesByLevel(0),function(r){if(r)return n(r);if(!i.routes.length){if(e.__redirects)return n(new Error('Wrong router default url "'+e.defaultUrl+'"'));if(e.defaultUrl)return e.defaultUrl==e.getUrl()?n(new Error("Not found any routes")):(e.__disableChange=!0,e.setUrl(e.defaultUrl),e.__redirects++,e.changeState().then(t).catch(n));l.default.options.debug&&console.warn('Not found a default route. You can pass it in "router.init(defaultUrl)" function')}if(e.__options.saveScrollPosition||i.hash||window.scrollTo(0,0),e.__options={},e.__redirects=0,o)for(var s=a,u=o.routes.length;s<u;s++){var c=o.routes[s];c.component&&c.component.empty()}window.dispatchEvent(new CustomEvent("state-changed",{detail:i})),t(i)})})},v.deinit=function(){window.removeEventListener("popstate",this.__onStateChangeHandler),v.setDefaults()},v.Transition=y,t.default=v,v.setDefaults()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Else=t.ElseIf=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),h=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.html=s.el.innerHTML,s.el.innerHTML="",s.state=!1,s.active=!1,s.recreate=!1,s.isCompiled=!1,s.display=getComputedStyle(s.el).display,s}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("if",this),f.default.component("else-if",this.ElseIf),f.default.component("else",this.Else)}}]),s(t,[{key:"compiled",value:function(){var e=this;return this.attr("recreate",this.setRecreation),this.attr("is",function(t){return e.state=!!t,e.setState()})}},{key:"setActivity",value:function(e){this.active=e}},{key:"setRecreation",value:function(e){this.recreate=e}},{key:"setState",value:function(){var e=this.compilation(),t=this.el.nextElementSibling,n=void 0;if(t&&t.matches("else-if,else"))return t.__akili.setActivity(this.active||this.state),t.__akili.setRecreation(this.recreate),n=t.__akili.setState(),Promise.resolve(e).then(function(){return n})}},{key:"compilation",value:function(){var e=void 0;return this.state&&!this.active?(!this.recreate&&this.isCompiled||(e=this.compile()),this.el.style.display=this.display):(this.recreate?this.empty():this.isCompiled||(e=this.compile()),this.el.style.display="none"),e}},{key:"compile",value:function(){var e=void 0;return this.el.innerHTML=this.html,e=f.default.compile(this.el,{recompile:!0}),this.isCompiled=!0,e}}]),t}(l.default);h.matches="[is]",h.booleanAttributes=["recreate"],t.default=h;var p=t.ElseIf=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.active=!0,s}return a(t,e),t}(h),_=t.Else=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.el.setAttribute("is","true"),s}return a(t,e),t}(p);_.matches="",h.ElseIf=p,h.Else=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(6),f=r(c),h=n(1),p=r(h),_=n(0),d=r(_),y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.iteratorTagName="option",s.isMultiple=!1,s}return a(t,e),l(t,null,[{key:"define",value:function(){d.default.component("select",this),d.default.component("option",this.Option)}}]),l(t,[{key:"created",value:function(){var e=this;return this.el.addEventListener("change",function(){e.el.content=e.getContent()}),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"created",this).apply(this,arguments)}},{key:"resolved",value:function(){this.attr("multiple",this.setMultiple),this.attr("content",this.setContent)}},{key:"draw",value:function(){var e=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).apply(this,arguments).then(function(){return e.drawSelect()})}},{key:"setMultiple",value:function(e){this.isMultiple=e,this.changeValue(this.formatValue(p.default.copy(this.el.content)))}},{key:"setContent",value:function(e){this.changeValue(this.formatValue(e))}},{key:"drawSelect",value:function(){for(var e=[],t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t].__akili,o=r.attrs.selected;o&&e.push(r.el.value),r.el.selected=o}e.length?this.changeValue(this.formatValue(e)):this.redefine()}},{key:"createIteratorElement",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createIteratorElement",this).call(this);return e.hasAttribute("value")||e.setAttribute("value",this.html.trim()),e}},{key:"getContent",value:function(){if(!this.isMultiple)return this.el.value;for(var e=[],t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t];r.selected&&e.push(r.value)}return e}},{key:"formatValue",value:function(e){return this.isMultiple?Array.isArray(e)||(e=void 0!==e&&null!==e?[e]:[]):Array.isArray(e)?e=e.length?e[0]:"":"object"!=(void 0===e?"undefined":s(e))&&"function"!=typeof e||(e=""),e}},{key:"redefine",value:function(){this.changeValue(this.getContent())}},{key:"changeValue",value:function(e){if(!p.default.compare(this.el.content,e)){if(Array.isArray(e)){this.el.value=e[e.length-1];for(var t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t];r.selected=-1!=e.indexOf(r.value)}}else{this.el.value=e;for(var o=0,i=this.el.options.length;o<i;o++){var a=this.el.options[o];a.selected=a.value==e}}this.el.content=e,this.attrs.onChange.dispatch(Event,{bubbles:!0})}}}]),t}(f.default);y.booleanAttributes=["multiple"].concat(f.default.booleanAttributes),y.events=["change"].concat(f.default.events),t.default=y;var v=t.Option=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"__getParsedExpression",value:function(e){return p.default.decodeHtmlEntities(e)}},{key:"changedSelected",value:function(e){this.setSelected(e)}},{key:"setSelected",value:function(e){this.el.selected=e,this.for.redefine()}}]),t}(c.Loop);v.booleanAttributes=["selected"],y.Option=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),c=r(l),f=n(0),h=r(f),p=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.isCheckbox="checkbox"==s.el.type,s.isRadio="radio"==s.el.type,s}return a(t,e),u(t,null,[{key:"define",value:function(){h.default.component("input",this)}}]),u(t,[{key:"created",value:function(){var e=this;return(this.isRadio||this.isCheckbox)&&this.el.addEventListener("click",function(){e.setChecked(e.el.checked,!1)}),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"created",this).apply(this,arguments)}},{key:"resolved",value:function(){return(this.isCheckbox||this.isRadio)&&this.attr("checked",this.setChecked),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolved",this).apply(this,arguments)}},{key:"setChecked",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=!!e,this.prevChecked!==e&&(this.el.checked=this.prevChecked=e,t&&this.attrs.onChange.dispatch(Event,{bubbles:!0}),this.isRadio&&this.changeRadio())}},{key:"setValue",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).apply(this,arguments),this.isRadio&&this.attrs.onChange.dispatch(Event,{bubbles:!0})}},{key:"changeRadio",value:function(){for(var e=this.el.getAttribute("name"),t="input[type=radio][name='"+e+"']:not([scope='"+this.scope.__name+"'])",n=h.default.root.children(t),r=0,o=n.length;r<o;r++){var i=n[r];i.setChecked(i.el.checked)}}}]),t}(c.default);p.booleanAttributes=["checked","multiple"].concat(c.default.booleanAttributes),p.events=["change"].concat(c.default.events),t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButton=void 0;var s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),c=r(l),f=n(0),h=r(f),p=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.iterable=s.el.hasAttribute("in"),s}return a(t,e),u(t,null,[{key:"define",value:function(){h.default.component("radio",this),h.default.component("radio-button",this.RadioButton)}}]),u(t,[{key:"created",value:function(){var e=this;if(this.el.addEventListener("change",function(){setTimeout(function(){var t=e.getRadioValue();t!==e.prevValue&&(e.prevValue=t,e.attrs.onRadio.trigger(t,{bubbles:!0}))})}),this.iterable)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"created",this).apply(this,arguments)}},{key:"resolved",value:function(){return this.attr("value",this.setValue),this.attr("name",this.setNames),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolved",this).apply(this,arguments)}},{key:"draw",value:function(){var e=this;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).apply(this,arguments).then(function(){return e.__isResolved&&e.setNames(e.attrs.name)})}},{key:"setNames",value:function(e){for(var t=this.children("input[type=radio]"),n=0,r=t.length;n<r;n++)t[n].el.setAttribute("name",e)}},{key:"setValue",value:function(e){if(e!==this.prevValue){var t=this.prevValue,n=this.children("input[type=radio]"),r=!1;this.prevValue=e;for(var o=0,i=n.length;o<i;o++){var a=n[o],s=a.el.value===e;s&&(r=!0),a.setChecked(s)}if(!r)if(null===e){if(void 0===t)return}else this.prevValue=void 0,e=null;this.attrs.onRadio.trigger(e,{bubbles:!0})}}},{key:"getRadioValue",value:function(){for(var e=this.children("input[type=radio]"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.el.checked)return r.el.value}return null}}]),t}(c.default);p.matches="[name]",p.events=["radio"].concat(c.default.events),t.default=p;var _=t.RadioButton=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return a(t,e),u(t,[{key:"compiled",value:function(){return this.attr("value","value"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"compiled",this).apply(this,arguments)}}]),t}(l.Loop);_.template='<label><input type="radio" value="${this.value}"/>${this.__content}</label>',p.RadioButton=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("textarea",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(0),f=r(c),h=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.el.hasAttribute("editable")&&(s.el.setAttribute("contenteditable",s.el.getAttribute("editable")),s.el.removeAttribute("editable")),"inline"==getComputedStyle(s.el).display&&(s.el.style.display="block"),s.valueKey="innerHTML",s}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("content",this),f.default.alias("[contenteditable]","content")}}]),s(t,[{key:"setElementFocus",value:function(){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.el),e.collapse(!1),t.removeAllRanges(),t.addRange(e),this.el.focus()}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),h=n(4),p=r(h),_=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.html=s.el.innerHTML,s.el.innerHTML="",s.connection=null,s}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("include",this)}}]),s(t,[{key:"compiled",value:function(){return this.attr("cache",this.setCache),this.attr("url",this.setTemplate)}},{key:"setCache",value:function(e){this.cache=e}},{key:"setTemplate",value:function(e){var t=this;return this.connection&&this.connection.abort(),p.default.get(e,{cache:this.cache,onStart:function(e){t.connection=e}}).then(function(e){return t.connection=null,t.empty(),t.el.innerHTML=t.html,f.default.setTemplate(t.el,e.data),f.default.compile(t.el,{recompile:!0}).then(function(){t.attrs.onLoad.trigger(void 0,{bubbles:!1})})}).catch(function(e){throw t.attrs.onError.trigger(e,{bubbles:!1}),e})}}]),t}(l.default);_.matches="[url]",_.events=["load","error"],t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("iframe",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("img",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("embed",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("audio",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("video",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("track",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("source",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(0),f=r(c),h=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.urlAttribute="data",s}return a(t,e),s(t,null,[{key:"define",value:function(){f.default.component("object",this)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),c=r(l),f=n(11),h=r(f),p=n(0),_=r(p),d=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state=null,s.params={},s.query={},s.hash="",s.options={},s.isUrl=s.el.getAttribute("url"),s}return a(t,e),u(t,null,[{key:"define",value:function(){_.default.component("a",this)}}]),u(t,[{key:"created",value:function(){var e=this;this.el.addEventListener("click",function(t){if(t.preventDefault(),e.isUrl)return void h.default.location(e.attrs.url,e.options);h.default.state(e.state.name,e.params,e.query,e.hash,e.options)}),this.onStateChanged=function(){return e.state&&e.setActivity()},window.addEventListener("state-changed",this.onStateChanged)}},{key:"compiled",value:function(){this.attr("state",this.setState),this.attr("params",this.setParams),this.attr("query",this.setQuery),this.attr("hash",this.setHash),this.attr("options",this.setOptions),this.attr("url",this.setUrl),this.attr("state",this.resetHref,{callOnStart:!1}),this.attr("params",this.resetHref,{callOnStart:!1}),this.attr("query",this.resetHref,{callOnStart:!1}),this.attr("hash",this.resetHref,{callOnStart:!1}),this.attr("url",this.resetHref,{callOnStart:!1}),this.resetHref()}},{key:"removed",value:function(){window.removeEventListener("state-changed",this.onStateChanged)}},{key:"setUrl",value:function(e){this.url=e}},{key:"setState",value:function(e){this.state=this.getState(e),this.setActivity()}},{key:"setActivity",value:function(){this.scope.isActiveState=h.default.isActiveState(this.state),this.scope.inActiveState=h.default.inActiveState(this.state)}},{key:"setParams",value:function(e){if("object"!=(void 0===e?"undefined":s(e))||!e)throw new Error("Router state params must be an object");this.params=e}},{key:"setQuery",value:function(e){if("object"!=(void 0===e?"undefined":s(e))||!e)throw new Error("Router state query must be an object");this.query=e}},{key:"setHash",value:function(e){if("string"!=typeof e)throw new Error("Router state hash must be a string");this.hash=e}},{key:"setOptions",value:function(e){if("object"!=(void 0===e?"undefined":s(e))||!e)throw new Error("Router state options must be an object");this.options=e}},{key:"getState",value:function(e){var t=h.default.getState(e);if(!t)throw new Error('Not found router state with name "'+e+'"');return t}},{key:"resetHref",value:function(){this.url?this.attrs.href=this.url:this.attrs.href=h.default.createStateUrl(this.state,this.params,this.query,this.hash)}}]),t}(c.default);d.matches="[state]:not([url]),[url]:not([state])",d.controlAttributes=!0,t.default=d}]);